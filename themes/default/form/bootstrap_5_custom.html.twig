{% extends 'bootstrap_5_layout.html.twig' %}

{# Custom rendering dla p√≥l tekstowych i email #}
{% block form_row %}
    <div class="mb-3">
        {{- form_label(form) -}}
        {{- form_widget(form) -}}
        {{- form_errors(form) -}}
    </div>
{% endblock %}

{# Custom label z ikonami #}
{% block form_label %}
    {% if label is not same as(false) %}
        {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' form-label fw-semibold')|trim}) %}
        
        {% if label_icon is defined %}
            <label{% with { attr: label_attr } %}{{ block('attributes') }}{% endwith %}>
                <i class="{{ label_icon }} me-1 text-muted"></i>
                {{- label|trans -}}
            </label>
        {% else %}
            {{- parent() -}}
        {% endif %}
    {% endif %}
{% endblock %}

{# Custom input fields #}
{% block email_widget %}
    {% set type = type|default('email') %}
    {% set attr = attr|merge({'class': (attr.class|default('') ~ ' form-control form-control-lg')|trim}) %}
    <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
{% endblock %}

{% block text_widget %}
    {% set type = type|default('text') %}
    {% set attr = attr|merge({'class': (attr.class|default('') ~ ' form-control form-control-lg')|trim}) %}
    <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
{% endblock %}

{% block password_widget %}
    {% if show_toggle_password|default(false) %}
        <div class="input-group input-group-lg">
            {% set attr = attr|merge({'class': (attr.class|default('') ~ ' form-control form-control-lg')|trim}) %}
            <input type="password" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
            <span class="input-group-text" style="cursor: pointer;" onclick="togglePasswordField(this)">
                <i class="fas fa-eye"></i>
            </span>
        </div>
    {% else %}
        {% set attr = attr|merge({'class': (attr.class|default('') ~ ' form-control form-control-lg')|trim}) %}
        <input type="password" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
    {% endif %}
{% endblock %}

{# Custom checkbox rendering #}
{% block checkbox_row %}
    <div class="mb-3">
        <div class="form-check">
            {{- form_widget(form) -}}
            {{- form_label(form) -}}
        </div>
        {{- form_errors(form) -}}
    </div>
{% endblock %}

{% block checkbox_widget %}
    {% set attr = attr|merge({'class': (attr.class|default('') ~ ' form-check-input')|trim}) %}
    {{- parent() -}}
{% endblock %}

{% block checkbox_label %}
    {% if label is not same as(false) %}
        {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' form-check-label text-muted small')|trim}) %}
        {{- parent() -}}
    {% endif %}
{% endblock %}
